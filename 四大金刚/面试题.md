# 面试题

## 一、数据结构

### 1. 请说一说，Java中的HashMap的工作原理是什么？

> HashMap类有一个叫

---

## 二、操作系统



---

## 三、数据库

### 1 MyISAM和InnoDB的区别

**1.是否支持行级锁**

​	MyISAM 只有表级锁(table-level locking)，而 InnoDB 支持行级锁(row-level locking)和表级锁,默认为行级锁。

​	也就说，MyISAM 一锁就是锁住了整张表，这在并发写的情况下是多么滴憨憨啊！这也是为什么 InnoDB 在并发写的时候，性能更牛皮了！

**2.是否支持事务**

​	MyISAM 不提供事务支持。

​	InnoDB 提供事务支持，具有提交(commit)和回滚(rollback)事务的能力

**3.是否支持外键**

​	MyISAM 不支持，而 InnoDB 支持。

**4.是否支持数据库异常崩溃后的安全恢复**

​	MyISAM 不支持，而 InnoDB 支持。

​	使用 InnoDB 的数据库在异常崩溃后，数据库重新启动的时候会保证数据库恢复到崩溃前的状态。这个恢复的过程依赖于 `redo log` 。

**5.是否支持 MVCC**

​	MyISAM 不支持，而 InnoDB 支持。

​	讲真，这个对比有点废话，毕竟 MyISAM 连行级锁都不支持。

​	MVCC 可以看作是行级锁的一个升级，可以有效减少加锁操作，提供性能。

**拓展：MVCC**

1. MVCC是啥？

   MVCC 的英文全称是 Multiversion Concurrency Control ，中文意思是多版本并发控制技术。原理是，通过数据行的多个版本管理来实现数据库的并发控制，简单来说就是保存数据的历史版本。可以通过比较版本号决定数据是否显示出来。读取数据的时候不需要加锁可以保证事务的隔离效果。

2. MVCC 可以解决什么问题？

- 读写之间阻塞的问题，通过 MVCC 可以让读写互相不阻塞，读不相互阻塞，写不阻塞读，这样可以提升数据并发处理能力。
- 降低了死锁的概率，这个是因为 MVCC 采用了乐观锁的方式，读取数据时，不需要加锁，写操作，只需要锁定必要的行。
- 解决了一致性读的问题，当我们朝向某个数据库在时间点的快照是，只能看到这个时间点之前事务提交更新的结果，不能看到时间点之后事务提交的更新结果。

### 2 关于 MyISAM 和 InnoDB 的选择问题

- 是否要支持事务，如果要请选择 InnoDB，如果不需要可以考虑 MyISAM。

- 如果表中绝大多数都只是读查询（一般R/W > 100:1且update相对较少），可以考虑 MyISAM；如果既有读写也挺频繁，请使用InnoDB。

- 系统奔溃后，MyISAM恢复起来更困难，能否接受，不能接受就选 InnoDB。

- 表数据量超过1000万，并发高，请使用InnoDB；如果数据量很小，可以考虑MyISAM。

- MySQL5.5版本开始Innodb已经成为Mysql的默认引擎(之前是MyISAM)，说明其优势是有目共睹的。如果你不知道用什么存储引擎，那就用InnoDB，至少不会差。

一般情况下我们选择 InnoDB 都是没有问题的，但是某些情况下你并不在乎可扩展能力和并发能力，也不需要事务支持，也不在乎崩溃后的安全恢复问题的话，选择 MyISAM 也是一个不错的选择。但是一般情况下，我们都是需要考虑到这些问题的。

因此，对于咱们日常开发的业务系统来说，你几乎找不到什么理由再使用 MyISAM 作为自己的 MySQL 数据库的存储引擎。