# 注解与反射

## 1. 什么是注解（Annotation)

Annotation是从JDK5.0开始引入的新技术；

Annotation的作用：

- 不是程序本身，可以对程序作出解释（这一点和注释（comment)没什么区别
- **可以被其他程序（比如：编译器等）读取**

Annotation的格式

- 注解是以“@注释名”在代码中存在的，还可以添加一些参数值，例如：@SuppressWarning(valut = "unchecked")

Annotation在哪里使用

- 可以附加在package，class , method , field 等上面，相当于给他们添加了额外的辅助信息。我们可以通过反射机制编程实现对这些元数据的访问。

## 2. 内置注解

![image-20200617214145049](https://gitee.com/jiao_qianjin/zhishiku/raw/master/img/20200617214153.png)

```java
// @SuppressWarnings("all")
public class text01  extends Object{

    @Override  // 重写的注解
    public String toString() {
        return super.toString();
    }

    @Deprecated  //程序员不鼓励使用的程序元素，通常是因为它是危险的，或者因为存在更好的替代方法。
    public static void test() {
        System.out.println("Deprecated");
    }
    @SuppressWarnings("all")  //镇压警告，表示该组警告被压制
    public void  test03() {
        List list = new ArrayList();
    }
    public static void main(String[] args) {
        test();
    }
}
```

- @SafeVarags
  抑制“堆污染”警告

```java

// 堆污染 引发 ClassCastException异常
List list = new ArrayList<>();
list.add(20);  // 添加元素时引发 unchecked异常
//引发“未经检查的转换”的警告，编译，运行时完全正常
List<String> ls = list;
// 只要访问ls 里面的元素，就会引起运行时异常
 System.out.println(ls.get(0));
```

抑制这个警告的方法

- 使用@SafeVarargs修饰引发该警告的方法或构造器
- 使用@SupperessWarning("unchecked")修饰
- 编译是使用-Xlint:varargs选项

@Functionallnterface

 	JAVA8 的函数式接口

## 3. 元注解

![image-20200617215435561](https://gitee.com/jiao_qianjin/zhishiku/raw/master/img/20200617215435.png)

```java
@MyAnnotation
public class test02 {
    public void test() {}
}

// 定义一个注解
// Target  表示我们的注解可以用在那个地方
@Target(value = {ElementType.METHOD,ElementType.TYPE})

// Retention 表示我们的注解在什么地方还有效
@Retention(value = RetentionPolicy.RUNTIME)

//@Documented  表示是否将我们的注解生成在JAVAdoc中
@Documented

//@Inherited 子类可以继承父类的注解
@Inherited
@interface MyAnnotation {
    
}
```

## 4. 自定义注解

![image-20200617221301372](https://gitee.com/jiao_qianjin/zhishiku/raw/master/img/20200617221301.png)

```java
// 自定义注解
public class test03 {
    @MyAnnotation2(name = "前进",age = 18)
    public void test01 () {

    }
    @MyAnnotation3("AAA") //只有一个值的情况下。注解中添加value,使用的时候可以省略
    public void test02 () {

    }
}

@Target({ElementType.METHOD,ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@interface MyAnnotation2 {
    // 注解的参数 ： 参数类型 + 参数名 （）
    String name() default "";
    int age();
    int id() default -1; // 如果默认值为-1，代表不存在

    String[] schools() default {"河南科技学院","园艺园林学院"};

}
@Target({ElementType.METHOD,ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@interface MyAnnotation3 {
    String value();
}
```

