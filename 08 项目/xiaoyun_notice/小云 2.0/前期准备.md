## 1. 开发流程

### 1. 基本流程

![image-20201130094648383](https://gitee.com/jiao_qianjin/zhishiku/raw/master/img/20201130094656.png)

![image-20201130094731372](https://gitee.com/jiao_qianjin/zhishiku/raw/master/img/20201130094731.png)

### 2. 详细流程

1. 一般会留出3天的时间进行项目开发前的准备工作。包括需求分析、画项目结构图、熟悉项目用到的技术栈等。

2. 项目排期，任务细化，分配每项任务的截止时间。定初步的项目联调时间和交付时间。

3. 后端设计数据库（可以放在数据库设计前）

4. 前后端讨论API接口文档——>后端写API文档——>前端review接口文档

5. 前后端项目环境搭建（可提前准备）

6. 项目开发

7. 项目组内测，bug修复

8. 项目联调（含学长），bug修复

9. 客户小范围内测，bug修复

10. 审核交付

----

## 2. 开发规范

### 1. 后端

 1. 合理使用插件，安装Lombok  Alibaba  规范插件

 2. 注释

    1. Controller层有swagger注释的可不加注释
    2. 类、接口、方法至少需要注明：作者、时间、日期，描述功能
    3. 在必要处，如分支等地方
    4. 在改别人代码时，在注释中加入自己修改的名字和修改日期

 3. 代码规范

     	1. 开发前review gitLab doc_standard
    	2. 对报错的警告也要处理
    	3. 对错误数据，边界数据，null 要进行处理
    	4. 推荐使用阿里巴巴java插件对代码检查

	4. 日志打印

    1. 框架中常用日志等级（从低到高）： Debug->Info->warning->Error 

    2. 各日志等级使用

       1. Debug： 在本地开发中使用，可打印任何打印信息
       2. Info：打印业务日志
       3. Error：报错，业务预期/非预期错误，站在业务角度：需要关注的程序异常都用此等级打印

    3. 打印信息

       1. 不输出无用信息，主（谁）谓（动词）宾（对谁）状补（干了什么，怎么样了）
       2. 输出信息中包含自己的唯一信息（邮箱、名字缩写如lqc）
       3. 本地调试可以打印SQL结果，上线不允许打印，但可打印执行的SQL语句

    4. 日志位置

       1. 失败出（必）
       2. 敏感操作，增删改

    5. 打印模板

       ```java
       log.error("【修改用户信息失败】" + "操作人id：" + SecurityUtils.getCurrentUserId() + "修改用户id：" + user.getId());
       log.info("【修改用户信息成功】" + "操作人id：" + SecurityUtils.getCurrentUserId() + "修改用户id：" + user.getId());
       ```

    6. mybatis @one @many 是否使用

       讨论结果：不建议使用

       **可使用方案**

       1. **join查询：**查询时候可以使用join连接查询，支持最多3张表join查询

       2. **业务组装**：将多张表的信息返回到业务层，然后利用for循环语句组装数据，效率比@One，@many要快

       3. **利用缓存**：可以使用@one和@many，第一次查询时效率慢些，但对接下来查询，会直接从缓存中查询，不用走数据库

    7. 查询

       1. getOne

          ```JAVA
          // 根据 Wrapper，查询一条记录。结果集，如果是多个会抛出异常，随机取一条加上限制条件 wrapper.last("LIMIT 1")
          T getOne(Wrapper<T> queryWrapper);
          ```

       2. 自己写的sql 查询一条数据，需要加 limit 1 