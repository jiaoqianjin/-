## Java

### 1. Java 反射？反射有什么缺点？你是怎么理解反射的（为什么框架需要反射）？

#### 1.1 Java 反射

反射就是Reflection，Java的反射是指程序在运行期可以拿到一个对象的所有信息。

JAVA反射机制是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意一个方法和属性；这种动态获取的信息以及动态调用对象的方法的功能称为java语言的反射机制。

#### 1.2 特点：

**优点**：反射提高了程序的灵活性和扩展性，降低耦合性，提高自适应能力。它允许程序创建和控制任何类的对象，无需提前硬编码目标类。                                                          

举例：代码中需要实例化一个对象，比如person()，用new Person()，不用反射机制。若此处要实例化其他类，则必须修改源代码并重新编译。若使用反射机制，class.forName("person").newInstance(); 这个类的描述可以写到配置文件中，此时如果想实例化其他类，只需要修改配置文件中的相应类描述即可，无需修改源码重新编译。    

​               

**缺点**：

1、性能问题：使用反射是一种解释操作，用于字段和方法接入时要远慢于直接代码，因此反射机制主要应用在对灵活性和扩展性要求很高的系统框架上，普通程序不建议使用；                                            

反射包含了一些动态类型，所以JVM无法对这些代码进行优化，因此反射操作的效率要比非反射操作低得多。应避免在经常被执行的代码或对性能要求很高的程序中只用反射。                                                

2、使用反射会模糊程序内部逻辑：一般希望在源代码中体现程序的逻辑，反射绕过了源代码的技术，反射代码比相应的直接代码更复杂，会给维护带来问题。                                                              

3、安全限制：使用反射技术要求程序必须在一个没有安全限制的环境中运行，若一个程序必须在有安全限制的环境中运行，如Applet，那么就会出现问题。                                                               

4、内部暴露：由于反射允许代码执行一些在正常情况下不被允许的操作(比如访问私有的属性和方法)，所以使用反射可能会导致意料之外的副作用--代码有功能上的错误，降低可移植性。反射代码破坏了抽象性，因此当平台发生改变的时候，代码的行为可能也随着变化。



### 2. 谈谈对 Java 注解的理解，解决了什么问题？

#### 注解的作用：

编写文档：通过代码里标识的元数据生成文档【生成文档doc文档】

代码分析：通过代码里标识的元数据对代码进行分析【使用反射】

编译检查：通过代码里标识的元数据让编译器能够实现基本的编译检查【Override】

### 3. 内部类了解吗？匿名内部类了解吗？

在Java中，可以将一个类的定义放在另外一个类的定义内部，这就是**内部类**。内部类本身就是类的一个属性，与其他属性定义方式一致。

#### 内部类的分类有哪些

内部类可以分为四种：**成员内部类、局部内部类、匿名内部类和静态内部类**。

##### 静态内部类

定义在类内部的静态类，就是静态内部类。

##### 成员内部类

定义在类内部，成员位置上的非静态类，就是成员内部类。

##### 局部内部类

定义在方法中的内部类，就是局部内部类。

##### 匿名内部类

匿名内部类就是没有名字的内部类，日常开发中使用的比较多。

除了没有名字，匿名内部类还有以下特点：

- 匿名内部类必须继承一个抽象类或者实现一个接口。
- 匿名内部类不能定义任何静态成员和静态方法。

- 当所在的方法的形参需要被匿名内部类使用时，必须声明为 final。
- 匿名内部类不能是抽象的，它必须要实现继承的类或者实现的接口的所有抽象方法。

#### 内部类的优点

我们为什么要使用内部类呢？因为它有以下优点：

- 一个内部类对象可以访问创建它的外部类对象的内容，包括私有数据！
- 内部类不为同一包的其他类所见，具有很好的封装性；

- 内部类有效实现了“多重继承”，优化 java 单继承的缺陷。
- 匿名内部类可以很方便的定义回调。

#### 内部类有哪些应用场景

1. 一些多算法场合
2. 解决一些非面向对象的语句块。

1. 适当使用内部类，使得代码更加灵活和富有扩展性。
2. 当某个类除了它的外部类，不再被其他的类使用时。

### 4. BIO和NIO区别,4核cpu，100个http连接，用BIO和NIO分别需要多少个线程

### 5. 假如我们需要存500个数需要多大的HashMap？

### 6. HashMap的负载因子。

### 7. jvm:

#### 7.1 jvm 内存结构

**线程私有的：**

- - 程序计数器：**字节码解释器工作时通过改变这个计数器的值来选取下一条需要执行的字节码指令，分支、循环、跳转、异常处理、线程恢复等功能都需要依赖这个计数器来完成。**
  - 虚拟机栈：Java 虚拟机栈是由一个个栈帧组成，而每个栈帧中都拥有：局部变量表、操作数栈、动态链接、方法出口信息。）

- - 本地方法栈： 和虚拟机栈所发挥的作用非常相似，区别是： **虚拟机栈为虚拟机执行 Java 方法 （也就是字节码）服务，而本地方法栈则为虚拟机使用到的 Native 方法服务。**

**线程共享的：**

- - 堆：**此内存区域的唯一目的就是存放对象实例，几乎所有的对象实例以及数组都在这里分配内存。**
  - 方法区：方法区与 Java 堆一样，是各个线程共享的内存区域，它用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。

- - 直接内存 (非运行时数据区的一部分)：**直接内存并不是虚拟机运行时数据区的一部分，也不是虚拟机规范中定义的内存区域，但是这部分内存也被频繁地使用。**

#### 7.2 jvm 调优参数

#### 7.3什么是类加载？

#### 7.4 何时类加载？

#### 7.5 java的类加载流程？

Class 文件需要加载到虚拟机中之后才能运行和使用，那么虚拟机是如何加载这些 Class 文件呢？

系统加载 Class 类型的文件主要三步：**加载->连接->初始化**。连接过程又可分为三步：**验证->准备->解析**。

![img](https://gitee.com/jiao_qianjin/zhishiku/raw/master/img/20211009101610.png)

#### 7.6 知道哪些类加载器。类加载器之间的关系？

JVM 中内置了三个重要的 ClassLoader，除了 BootstrapClassLoader 其他类加载器均由 Java 实现且全部继承自java.lang.ClassLoader：

1. 1. **BootstrapClassLoader(启动类加载器)** ：最顶层的加载类，由 C++实现，负责加载 %JAVA_HOME%/lib目录下的 jar 包和类或者被 -Xbootclasspath参数指定的路径中的所有类。
   2. **ExtensionClassLoader(扩展类加载器)** ：主要负责加载 %JRE_HOME%/lib/ext 目录下的 jar 包和类，或被 java.ext.dirs 系统变量所指定的路径下的 jar 包。

1. 1. **AppClassLoader(应用程序类加载器)** ：面向我们用户的加载器，负责加载当前应用 classpath 下的所有 jar 包和类。

#### 7.7 类加载器之间的关系？

![img](https://gitee.com/jiao_qianjin/zhishiku/raw/master/img/20211009101615.png)

#### 7.8 类加载器的双亲委派 （结合tomcat说一下双亲委派）

每一个类都有一个对应它的类加载器。系统中的 ClassLoader 在协同工作的时候会默认使用 **双亲委派模型** 。即在类加载的时候，系统会首先判断当前类是否被加载过。已经被加载的类会直接返回，否则才会尝试加载。加载的时候，首先会把该请求委派给父类加载器的 loadClass() 处理，因此所有的请求最终都应该传送到顶层的启动类加载器 BootstrapClassLoader 中。当父类加载器无法处理时，才由自己来处理。当父类加载器为 null 时，会使用启动类加载器 BootstrapClassLoader 作为父类加载器。

#### 7.9 为什么需要双亲委派

双亲委派模型保证了 Java 程序的稳定运行，**可以避免类的重复加载**（JVM 区分不同类的方式不仅仅根据类名，相同的类文件被不同的类加载器加载产生的是两个不同的类），**也保证了 Java 的核心 API 不被篡改**。如果没有使用双亲委派模型，而是每个类加载器加载自己的话就会出现一些问题，比如我们编写一个称为 java.lang.Object 类的话，那么程序运行的时候，系统就会出现多个不同的 Object 类。

#### 7.10 Java内存模型

#### 7.11 栈中存放什么数据，堆中呢？

**堆**存放的是对象的实例和数组。因此该区更关注的是数据的存储

**栈**存放：局部变量，操作数栈，返回结果。该区更关注的是程序方法的执行。

PS：

- - 静态变量放在方法区
  - 静态的对象还是放在堆。

#### 7.12 大对象放在哪个内存区域

大对象就是需要大量连续内存空间的对象（比如：字符串、数组）。

**为什么要这样呢？**

为了避免为大对象分配内存时由于分配担保机制带来的复制而降低效率。

#### 7.13 堆区如何分类

#### 7.14 垃圾回收有哪些算法

#### 7.15 GC的全流程

#### 7.16 GC中老年代用什么回收方法？

## 多线程：

#### Java线程池有哪些参数？阻塞队列有几种？拒绝策略有几种？

#### 死锁

## 设计模式：

#### 阅读Spring源码的时候什么设计模式最让你影响深刻？如何使用？

#### 单例模式，单例模式的使用场景

#### 观察者模式，观察者模式的使用场景

## Spring

#### spring boot和spring的区别

#### ioc 和 aop(ioc流程、aop实现原理)、spring aop异常处理、当一段代码被try catch后再发生异常时，aop的异常通知是否执行，为什么？

#### spring bean的生命周期说一下

#### spring data jpa底层是什么？

#### hibernate和mybatis区别

#### spring boot 过滤器

#### spring boot 拦截器

#### Spring动态代理默认用哪一种

#### 写出spring jdk动态代理的实现。

#### 画出spring boot处理一个http请求的全过程

#### 推荐

#### 手写实现Spring核心功能： https://github.com/jinzzzzz/spring-demo

## 权限认证

#### 认证 (Authentication) 和授权 (Authorization)的区别是什么？

#### 什么是Cookie ? Cookie的作用是什么?如何在服务端使用 Cookie ?

#### Cookie 和 Session 有什么区别？如何使用Session进行身份验证？

#### 如果没有Cookie的话Session还能用吗？

#### 为什么Cookie 无法防止CSRF攻击，而token可以？

#### 什么是 Token?什么是 JWT?如何基于Token进行身份验证？

#### 什么是OAuth 2.0？

#### 什么是SSO(单点登录)

#### 这部分问题答案整理在了这里：https://snailclimb.gitee.io/javaguide/#/docs/system-design/authority-certification/basis-of-authority-certification

### **微服务/分布式**

1. 为什么要网关？
2. 限流的算法有哪些？

1. 为什么要分布式 id ？分布式 id 生成策略有哪些？
2. 了解RPC吗？有哪些常见的 RPC 框架？

1. 如果让你自己设计 RPC 框架你会如何设计？
2. Dubbo 了解吗？Spring Cloud 了解吗？

### **数据库**

1. 非关系型数据库和关系型数据库的区别？
2. **事务的四大特性**

1. **MySQL 事务隔离级别？默认是什么级别？**
2. **乐观锁与悲观锁的区别**

1. 数据库两种存储引擎的区别
2. 最左前缀匹配原则及它的原因

1. 大表优化的思路
2. **where和having的区别**

1. 分库分表
2. **explain 命令**

**索引**

1. **如何加快数据库查询速度**
2. **聚集索引和非聚集索引的区别**

1. **什么时候不该使用索引？**
2. **索引底层的数据结构？**

1. **B+树做索引比红黑树好在哪里？**
2. 6.

**Redis:**

1. 项目中 redis 是怎么用的？解决了什么问题？
2. 说一下有缓存情况下查询的流程以及有缓存情况下修改的流程。

1. redis有哪些数据结构
2. redis内存满了怎么办

1. redis内存淘汰算法除了lru还有哪些
2. 分布式缓存可能出现的问题

1. 缓存穿透问题

### **网络**

1. **计算机网络的一些常见状态码**
2. ping 所使用的协议

1. **TCP的三次握手与四次挥手的内容**
2. **TCP为什么连接是三次握手而断开是四次握手**

1. TCP与UDP的区别及使用场景
2. **一次完整的HTTP请求所经的步骤**

1. http 如何保存登录信息(没太搞懂意思)
2. **Cookie 和 Session的关系**

### **算法和数据结构**

**算法**

1. LRU 算法了解吗？你能实现一个吗？
2. 写排序算法（快排、堆排）

**数据结构**

1. 布隆过滤器了解吗？

### **设计题**

1. 假如有10亿个数，只有一个重复，内存只能放下5亿个数，怎么找到这个重复的数字？
2. 如何设计一个秒杀系统（服务端、数据库、分布式）？分布式系统的设计？

1. 有一个服务器专门接收大量请求，怎么设计？
2. 如果让你自己设计 RPC 框架你会如何设计？

1. 怎么快速出现一个stackoverflow错误？

### **其他问题**

1. 自我介绍。
2. 说说你的项目中的亮点有哪些。

1. 画一下你的项目的架构图。
2. **Restful 了解吗？简单说一下自己对它的认识，如果我要返回一个 boolean 类型的数据怎么办？**

### **经验总结**

1. 多面试，不要害怕失败，多总结经验。
2. 尽早准备，不论是找工作前、面试前还是面试后。

1. 熟悉自己的简历。
2. 电话和视频面试很平常，面试前提前准备一下。

1. 坚持！offer 虽然可能会迟到，但是只要不放弃，就一定不会缺席。